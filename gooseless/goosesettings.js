goosemod.settings=function(e){"use strict";var t=e=>new Promise((t=>setTimeout(t,e)));const s={changelog:!0,separators:!0,gmBadges:!0,attrs:!1,home:!0,devchannel:!1,snippets:!1,autoupdate:!0,newModuleNotifications:!1,placeholderimage:!1,collapsiblehome:!0,allThemeSettings:!1,debugToasts:!1},o=()=>{const e=JSON.parse(goosemod.storage.get("goosemodGMSettings"))||{};return{...s,...e,get:()=>n}},n={uninit:!0};var a=new Proxy({uninit:!0},{get:(e,t)=>(e.uninit&&(e=o()),e[t]??!1),set:(e,t,s)=>(e.uninit&&(e=o()),e[t]=s,goosemod.storage.set("goosemodGMSettings",JSON.stringify(e)),!0)}),r=async e=>{const{React:t,ReactDOM:s}=e.webpackModules.common,o=e.webpackModules.find((e=>e.default&&"ConnectedPrivateChannelsList"===e.default.displayName)),n=e.webpackModules.findByDisplayName("ListSectionItem"),{LinkButton:a}=e.webpackModules.findByProps("LinkButton"),r=e.webpackModules.findByProps("interactive","selected"),i=e.webpackModules.findByProps("channel","linkButtonIcon"),l=e.webpackModules.findByProps("headerText","privateChannelsHeaderContainer"),d=e.webpackModules.findByProps("icon","iconBadge","title"),c=e.webpackModules.findByProps("scrollerBase","auto","thin"),p={themes:t.createElement(e.webpackModules.findByDisplayName("Eye"),{width:24,height:24}),plugins:t.createElement(e.webpackModules.findByDisplayName("InlineCode"),{width:24,height:24}),snippets:t.createElement(e.webpackModules.findByDisplayName("Pictures"),{width:24,height:24}),expandable:t.createElement(goosemod.webpackModules.findByDisplayName("DropdownArrow"),{className:`${d.icon}`,width:24,height:24})},m=(await Promise.resolve().then((function(){return y}))).default(),g=e.webpackModules.findByDisplayName("LoadingPopout"),u=(e,s,o)=>t.createElement(m,{icon:e,title:s,id:o}),h=(e,s)=>t.createElement("div",{className:e?"":`${c.auto}`,id:"gm-settings-inject",style:{padding:"22px",backgroundColor:"var(--background-primary)",height:"100%",overflow:e?"":"hidden scroll"}},s),b=e.webpackModules.findByProps("transitionTo"),f=(e,t,s=0)=>{if(s>5)return!1;const o=e.parentElement;return o.classList.contains(t)&&o||f(o,t,s+1)},w=(...e)=>e.map((e=>document.getElementsByClassName(e)[0])).find((e=>e));let x=e.settings.gmSettings.collapsiblehome&&goosemod.storage.get("goosemodHomeExpanded")||!0,k={plugins:e.settings.items.find((e=>"#terms.store.plugins#"===e[1])),themes:e.settings.items.find((e=>"#terms.store.themes#"===e[1])),snippets:e.settings.items.find((e=>"#terms.store.snippets#"===e[1]))},M={plugins:e.settings._createItem(k.plugins[1],k.plugins[2],!1),themes:e.settings._createItem(k.themes[1],k.themes[2],!1),snippets:e.settings._createItem(k.snippets[1],k.snippets[2],!1)};const E=(o,n)=>{const a=[...w("content-98HsJk","content-1SgpWY").children].find(((e,t)=>0!==t&&!e.classList.contains("erd_scroll_detection_container")));for(const e of w("scroller-1JbKMe","scroller-WSmht3").children[0].children)e.children[0]?.classList?.remove?.(r.selected,i.interactiveSelected);setTimeout((()=>{document.getElementById(`gm-home-${n}`).parentElement.classList.add(r.selected,i.interactiveSelected)}),0);const l="snippets"!==n&&Array.isArray(M[n].props.children)?M[n].props.children.filter((e=>"card"===e.props.type)).length:0,d="snippets"!==n?e.moduleStoreAPI.modules.filter((e=>"plugins"===n?!e.tags.includes("theme"):e.tags.includes("theme"))).length:0;if((l!==d||e.settings[`regen${n}`])&&(delete e.settings[`regen${n}`],M[n]=t.createElement("div",{className:"gm-store-loading-container"},t.createElement(g)),(async()=>{"snippets"!==n&&k[n][2].filter((e=>"card"===e.type)).length!==d&&await e.moduleStoreAPI.updateStoreSetting(),M[n]=e.settings._createItem(k[n][1],k[n][2],!1),document.querySelector(`#gm-home-${n}`).click()})()),1===a.children.length&&s.render(((e,s,o,n)=>t.createElement("div",{style:{height:"100%",overflow:"hidden"}},u(e,s,o),h(!1,n)))(p[n],o,n,M[n]),a.children[0]),2===a.children.length||3===a.children.length){let e=a.children.length-2;const t=a.children[e+1].classList.contains("stickyScroller-24zUyY");t&&(e=0),a.children[e+0].className="",s.render(u(p[n],o,n),a.children[e+0]),0!==e&&a.children[e+1].children[1]&&(a.children[e+1].children[1].style.display="none"),t&&(e=1),s.render(h(t,M[n]),0!==e?a.children[e+1].children[0]:a.children[e+1])}e.ootb.enabled&&e.ootb.todo.includes(n)&&(e.ootb[n](),e.ootb.done(n))},S=e.settings.gmSettings.snippets;e.settingsUninjects.push(e.patcher.patch(o,"default",((s,o)=>{if(o.props.children.props.children.some((e=>!0===e?.goosemod)))return;const c=e=>(e.goosemod=!0,e);setTimeout((()=>{w("scroller-1JbKMe","scroller-WSmht3").addEventListener("click",(e=>{const t=f(e.target,i.link);t&&!t.id.startsWith("gm-home-")&&(document.querySelectorAll('[id^="gm-home-"]').forEach((e=>e.parentElement.classList.remove(r.selected,i.interactiveSelected))),setTimeout((()=>{null!==document.getElementById("gm-settings-inject")&&(b.transitionTo("/invalid"),b.back())}),1))}))}),10),o.props.children.props.children.push(c(t.createElement(n,{className:l.privateChannelsHeaderContainer},t.createElement("span",{className:l.headerText},"GooseMod"),e.settings.gmSettings.collapsiblehome?t.createElement("div",{className:`${l.privateChannelRecipientsInviteButtonIcon} ${d.iconWrapper} ${d.clickable} gm-category-collapser`,style:{transform:`rotate(${x?"0":"-90"}deg)`,width:"22px",left:x?"0px":"-2px",top:x?"-6px":"-2px"},onClick:()=>{x=!x,goosemod.storage.set("goosemodHomeExpanded",x);const e=document.querySelector(".gm-category-collapser");e.style.transform=`rotate(${x?"0":"-90"}deg)`,e.style.left=x?"0px":"-2px",e.style.top=x?"-6px":"-2px";document.querySelectorAll('[id^="gm-home-"]').forEach((e=>e.style.display=x?"":"none"))}},p.expandable):null)),c(t.createElement(a,{style:{display:x||"#terms.store.themes#"===w("title-29uC1r","title-17SveM")?.textContent?"block":"none"},icon:()=>p.themes,onClick:()=>E("#terms.store.themes#","themes"),id:"gm-home-themes",text:"#terms.store.themes#",selected:!1})),c(t.createElement(a,{style:{display:x||"#terms.store.plugins#"===w("title-29uC1r","title-17SveM")?.textContent?"block":"none"},icon:()=>p.plugins,onClick:()=>E("#terms.store.plugins#","plugins"),id:"gm-home-plugins",text:"#terms.store.plugins#",selected:!1})),S?c(t.createElement(a,{style:{display:x||"#terms.store.snippets#"===w("title-29uC1r","title-17SveM")?.textContent?"block":"none"},icon:()=>p.snippets,onClick:()=>E("#terms.store.snippets#","snippets"),id:"gm-home-snippets",text:"#terms.store.snippets#",selected:!1})):null)}))),w("privateChannels-1nO12o","privateChannels-oVe7HL")&&(b.transitionTo("/invalid"),b.back()),(async()=>{await e.moduleStoreAPI.updateStoreSetting();for(const t of["themes","plugins"])M[t]=e.settings._createItem(k[t][1],k[t][2],!1);if(!S)return;const t=JSON.parse(goosemod.storage.get("goosemodSnippets"))||{};for(const e in t){const s=t[e];t[e]=document.createElement("style"),t[e].appendChild(document.createTextNode(s)),document.body.appendChild(t[e])}const s=async(s,o)=>{const{fetchMessages:n}=e.webpackModules.findByProps("fetchMessages","sendMessage"),{getRawMessages:a}=e.webpackModules.findByProps("getMessages"),{getChannel:r,hasChannel:i}=e.webpackModules.findByProps("getChannel","getDMFromUserId");if(!i(s))return;await n({channelId:s});const l=r(s),d=Object.values(a(s)).filter((e=>e.content.includes("```css")&&!e.message_reference&&!e.content.includes("quick CSS")&&!e.content.includes("Theme Toggler"))).sort(((e,t)=>t.attachments.length+t.embeds.length-(e.attachments.length+e.embeds.length))),c=e.settings.items.find((e=>"#terms.store.snippets#"===e[1]));c[2].push({type:"store-header",text:o},...d.map((s=>({type:"card",tags:[s.id],lastUpdated:0,discordMessage:{guild:l.guild_id,channel:l.id,message:s.id},images:[s.attachments?.[0]?.proxy_url||s.embeds?.[0]?.thumbnail?.proxy_url].filter((e=>e)),name:"",author:[{name:s.author.username,id:s.author.id,avatar:s.author.avatar}],subtext:s.content.replace(/```css(.*)```/gs,""),buttonText:t[s.id]?"#terms.remove#":"#terms.add#",buttonType:t[s.id]?"danger":"brand",onclick:()=>{const o=c[2].find((e=>e.tags?.includes(s.id))),n=document.querySelector(`[class*="${s.id}"]`).querySelector("button");e.settings.regensnippets=!0,t[s.id]?(t[s.id].remove(),delete t[s.id],n.className=n.className.replace("lookOutlined-3sRXeN colorRed-1TFJan","lookFilled-1Gx00P colorBrand-3pXr91"),n.textContent="#terms.add#",o.buttonText="#terms.add#",o.buttonType="brand"):(t[s.id]=document.createElement("style"),t[s.id].appendChild(document.createTextNode(/```css(.*)```/s.exec(s.content)[1])),document.body.appendChild(t[s.id]),n.className=n.className.replace("lookFilled-1Gx00P colorBrand-3pXr91","lookOutlined-3sRXeN colorRed-1TFJan"),n.textContent="#terms.remove#",o.buttonText="#terms.remove#",o.buttonType="danger");const a=Object.assign({},t);for(const e in a)a[e]=a[e].textContent;goosemod.storage.set("goosemodSnippets",JSON.stringify(a))},showToggle:!1,isToggled:()=>!1}))))};await s("755005803303403570","Powercord CSS Snippets"),await s("836694789898109009","BetterDiscord CSS Snippets"),await s("449569809613717518","Black Box CSS Snippets"),M.snippets=e.settings._createItem(k.snippets[1],k.snippets[2],!1)})()};let i,l,d={};const c=async()=>{l||p(),d.changelog.resetChangelog(),d.changelog.setChangelog(l),d.changelog.showChangelog(),await t(300);const e=()=>{document.querySelector(".modal-3Hrb0S .size20-9iTTnl").textContent=`GooseMod ${i}`,document.querySelector(".modal-3Hrb0S .footer-31IekZ").remove()};e(),d.changelog.resetChangelog(),setTimeout(e,300)},p=()=>{const e=JSON.parse("{\"version\":\"v12.3\",\"date\":\"2021-11-03\",\"body\":\"New Store Badges {added marginTop}\\n======================\\n\\n* **Store UI now uses a badge system to show version, time since last update, and GitHub stars.**\\n\\nGeneral Hotfixes {progress}\\n======================\\n\\n* **Fixed InternalMessage / some commands.**\\n* **Fixed Store using incorrect scrollbars.**\\n* **Fixed Store not working / rendering.**\\n\\nAdditions to APIs {added}\\n======================\\n\\n* **Webpack: Added findByModuleId function.**\\n* **Settings, Header: Added hide prop.**\"}");i=e.version,l={image:"https://media.discordapp.net/attachments/756146058924392542/771374562184658944/2018-11-14-11-36-30-1200x800.png",date:e.date,body:e.body}};const m=a;e.Items={};let g={};const u=()=>{const{findInReactTree:e}=g.reactUtils;if(!g.webpackModules.findByDisplayName("ColorPicker")){e(g.webpackModules.findByDisplayName("GuildFolderSettingsModal").prototype.render.call({props:{},state:{}}).props.children,(e=>e.props?.colors)).type().props.children.type._ctor()}};var h=async()=>{const{React:e}=goosemod.webpackModules.common,t=goosemod.webpackModules.findByDisplayName("SwitchItem");class s extends e.Component{constructor(e){const t=e.onChange;e.onChange=e=>{t(e),this.props.value=e,this.forceUpdate()},super(e)}render(){return e.createElement("div",{},e.createElement(r,{style:{width:"92px",position:"absolute",right:"10px",marginTop:"33px"},color:i.colorRed,size:i.sizeSmall,onClick:this.props.buttonOnClick},"#terms.remove#"),e.createElement(t,{...this.props}))}}let o;const n=async()=>{await goosemod.moduleStoreAPI.updateModules(),await goosemod.moduleStoreAPI.updateStoreSetting(),document.querySelector(".selected-aXhQR6").click()},a=async()=>{o(),await n(),w()},{Button:r}=goosemod.webpackModules.findByProps("Button"),i=goosemod.webpackModules.findByProps("button","colorRed"),l=goosemod.webpackModules.findByProps("ModalRoot"),d=goosemod.webpackModules.findByProps("socialLink","date"),c=goosemod.webpackModules.findByDisplayName("LegacyHeader"),p=goosemod.webpackModules.findByDisplayName("Text"),{openModal:m}=goosemod.webpackModules.findByProps("openModal","updateModal"),g=goosemod.webpackModules.findByDisplayName("Flex"),u=goosemod.webpackModules.findByDisplayName("TextInput"),h=goosemod.webpackModules.findByDisplayName("Tooltip"),y=goosemod.webpackModules.findByDisplayName("FlowerStar"),b=goosemod.webpackModules.findByDisplayName("Verified"),f=goosemod.webpackModules.findAll((e=>"Alert"===e.displayName)).pop(),w=()=>{const t=[];let w=0;for(const o of goosemod.moduleStoreAPI.repos){const r=[o.meta.name];if(o.pgp?.trustState){let t="",s=null;switch(o.pgp.trustState){case"trusted":t="#store.pgp.verified#",s=e.createElement(b,{className:"icon-1ihkOt"});break;case"untrusted":t="#store.pgp.untrusted#",s=e.createElement(f,{className:"icon-1ihkOt"});break;case"unknown":t="#store.pgp.unknown#",s=e.createElement(f,{className:"icon-1ihkOt"})}r.unshift(e.createElement("span",{style:{display:"inline-flex",position:"relative",top:"2px",marginRight:"4px"}},e.createElement(h,{position:"top",color:"primary",text:t},(({onMouseLeave:o,onMouseEnter:n})=>e.createElement(y,{className:`gm-repos-modal-icon-${s.type.displayName}`,"aria-label":t,onMouseEnter:n,onMouseLeave:o},s)))))}t.push(e.createElement(s,{style:{marginTop:0===w?"16px":""},note:o.meta.description,value:o.enabled,onChange:e=>{o.enabled=e,n()},buttonOnClick:async()=>{goosemod.moduleStoreAPI.repos.splice(goosemod.moduleStoreAPI.repos.indexOf(o),1),a()}},...r)),w++}let x="";m((s=>(o=s.onClose,e.createElement(l.ModalRoot,{transitionState:s.transitionState,size:"medium"},e.createElement(l.ModalHeader,{},e.createElement(g.Child,{basis:"auto",grow:1,shrink:1,wrap:!1},e.createElement(c,{tag:"h2",size:c.Sizes.SIZE_20},"#terms.store.repos#"),e.createElement(p,{size:p.Sizes.SIZE_12,className:d.date},goosemod.moduleStoreAPI.modules.filter((e=>e.tags.includes("theme"))).length," Themes",", ",goosemod.moduleStoreAPI.modules.filter((e=>!e.tags.includes("theme"))).length," Plugins",", ",Object.keys(goosemod.moduleStoreAPI.modules.reduce(((e,t)=>{let s=t.authors;return s.forEach||(s=[s]),s.forEach((t=>e[t.n||t.match(/(.*) \(([0-9]{17,18})\)/)?.[1]||t]=!0)),e}),{})).length," Developers")),e.createElement("FlexChild",{basis:"auto",grow:0,shrink:1,wrap:!1},e.createElement(l.ModalCloseButton,{onClick:s.onClose}))),e.createElement(l.ModalContent,{},...t,e.createElement(g,{style:{marginBottom:"16px"},basis:"auto",grow:1,shrink:1},e.createElement(u,{className:"codeRedemptionInput-3JOJea",placeholder:"https://example.com/modules.json",onChange:e=>{x=e}}),e.createElement(r,{style:{width:"112px"},size:i.sizeMedium,onClick:async()=>{let e={};try{e=await(await fetch(x)).json()}catch(e){}if(void 0===e.meta?.name)return void goosemod.showToast("#toasts.add_repo.invalid_repo.text#",{type:"error",timeout:5e3,subtext:"#toasts.add_repo.invalid_repo.subtext#"});if(!confirm("#modals.external_repo_security.main#"))return void goosemod.showToast("#toasts.add_repo.cancelled.text#",{type:"danger",timeout:5e3,subtext:"#toasts.add_repo.cancelled.reasons.refused#"});const t={url:x,meta:e.meta,enabled:!0},s=await goosemod.moduleStoreAPI.verifyPgp(t,!1);"untrusted"!==s.trustState?"trusted"===s.trustState||confirm("#modals.external_repo_security.bad_pgp#")?(goosemod.moduleStoreAPI.repos.push(t),a()):goosemod.showToast("#toasts.add_repo.cancelled.text#",{type:"danger",timeout:5e3,subtext:"#toasts.add_repo.cancelled.reasons.refused#"}):goosemod.showToast("#toasts.add_repo.cancelled.text#",{type:"danger",timeout:5e3,subtext:"#toasts.add_repo.cancelled.reasons.pgp#"})}},"#terms.add#")))))))};w()},y={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common,t=goosemod.webpackModules.findByProps("updateAvailable"),s=goosemod.webpackModules.findByProps("icon","iconBadge","title"),o=e.createElement(goosemod.webpackModules.findByDisplayName("Retry"),{width:24,height:24,className:s.icon}),n=e.createElement(goosemod.webpackModules.findByDisplayName("Cloud"),{width:24,height:24,className:s.icon}),a=goosemod.webpackModules.findByDisplayName("HeaderBarContainer"),r=goosemod.webpackModules.findByDisplayName("TabBar"),i=goosemod.webpackModules.findByProps("topPill"),l=goosemod.webpackModules.findByProps("tabBar","nowPlayingColumn"),d={themes:"STORE",plugins:"STORE"};return class extends e.PureComponent{constructor(e){super(e)}render(){return e.createElement(a,{isAuthenticated:!0,transparent:!1},e.createElement(a.Icon,{icon:()=>this.props.icon,className:s.icon}),e.createElement(a.Title,{},this.props.title),d[this.props.id]?e.createElement(a.Divider):null,d[this.props.id]?e.createElement(r,{selectedItem:d[this.props.id],type:i.topPill,className:l.tabBar,onItemSelect:e=>{d[this.props.id]=e,this.forceUpdate(),setTimeout(goosemod.settings.updateModuleStoreUI,10)}},e.createElement(r.Item,{id:"STORE",look:0,className:l.item},"#store.options.tabs.store#"),e.createElement(r.Item,{id:"IMPORTED",look:0,className:l.item},"#store.options.tabs.imported#")):null,"snippets"!==this.props.id?e.createElement("div",{className:s.toolbar,style:{position:"absolute",right:"0px"}},e.createElement(a.Icon,{icon:()=>o,tooltip:"#terms.refresh#",onClick:async()=>{document.querySelector(`.${s.toolbar} > [role="button"] > svg`).classList.add(t.updateAvailable),await goosemod.moduleStoreAPI.hotupdate(!0),document.querySelector(".selected-aXhQR6").click()}}),e.createElement(a.Icon,{icon:()=>n,tooltip:"#terms.store.repos#",onClick:h})):"")}}}},b=()=>{const{React:e}=goosemod.webpackModules.common,t=goosemod.webpackModules.findByDisplayName("FormDivider"),s=goosemod.webpackModules.findByProps("dividerDefault","titleDefault");return class extends e.PureComponent{render(){return e.createElement(t,{className:s.dividerDefault})}}},f={__proto__:null,default:b},w={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common,t=goosemod.webpackModules.findByDisplayName("FormTitle"),s=goosemod.webpackModules.findByProps("marginTop20","marginBottom8"),o=goosemod.webpackModules.findByDisplayName("Tooltip"),n=goosemod.webpackModules.findByDisplayName("Science");return class extends e.PureComponent{constructor(t){t.experimental&&(t.text=[e.createElement(o,{position:"top",color:"primary",text:"Experimental"},(({onMouseLeave:t,onMouseEnter:s})=>e.createElement(n,{width:18,height:18,className:"gm-settings-label-icon",onMouseLeave:t,onMouseEnter:s}))),e.createElement("span",{style:{verticalAlign:"unset"},className:"gm-settings-label-text"},t.text)]),t.id=`gm-settings-header-${Math.random().toString().substring(2)}`,t.collapsible=void 0!==t.collapsed,t.collapsed=t.collapsed||!1,t.hide&&(t.collapseOffset=0),super(t),this.props.handleCollapse=()=>{const e=[...document.querySelectorAll(`#${this.props.id} ~ *`)],t=e.slice(0,e.indexOf(e.find((e=>"H5"===e.tagName))));for(const e of t.slice(this.props.collapseOffset||0))e.style.display=this.props.collapsed?"none":""},this.props.collapsed&&this.props.handleCollapse()}render(){return setTimeout(this.props.handleCollapse,100),this.props.hide?null:e.createElement(t,{tag:"h5",className:(0!==this.props.i?s.marginTop20+" ":"")+s.marginBottom8,onClick:this.props.collapsible?()=>{this.props.collapsed=!this.props.collapsed,this.props.handleCollapse(),this.forceUpdate()}:void 0,id:this.props.id},this.props.text,this.props.collapsible?e.createElement(goosemod.webpackModules.findByDisplayName("DropdownArrow"),{className:["gm-settings-header-collapser",this.props.collapsed?"collapsed":""].join(" "),width:22,height:22}):null)}}}},x={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common,t=goosemod.webpackModules.findByDisplayName("SwitchItem"),s=goosemod.webpackModules.find((e=>"Markdown"===e.displayName&&e.rules)),o=goosemod.webpackModules.findByDisplayName("Tooltip"),n=goosemod.webpackModules.findByDisplayName("Science"),a=goosemod.webpackModules.findByDisplayName("InfoFilled");return class extends e.Component{constructor(t){const s=t.onToggle;t.onChange=e=>{this.props.value=e,this.forceUpdate(),s(e)},t.experimental&&(t.text=[e.createElement(o,{position:"top",color:"primary",text:"Experimental"},(({onMouseLeave:t,onMouseEnter:s})=>e.createElement(n,{width:22,height:22,className:"gm-settings-label-icon",onMouseLeave:t,onMouseEnter:s}))),e.createElement("span",{className:"gm-settings-label-text"},t.text)],t.subtext="**Experimental:** "+t.subtext),t.debug&&(t.text=[e.createElement(o,{position:"top",color:"primary",text:"Debug"},(({onMouseLeave:t,onMouseEnter:s})=>e.createElement(a,{width:22,height:22,className:"gm-settings-label-icon",onMouseLeave:t,onMouseEnter:s}))),e.createElement("span",{className:"gm-settings-label-text"},t.text)],t.subtext="**Debug:** "+t.subtext),super(t)}render(){return e.createElement(t,{value:this.props.isToggled(),note:e.createElement(s,{className:"gm-settings-note-markdown"},this.props.subtext||""),disabled:!!this.props.disabled&&this.props.disabled(),onChange:this.props.onChange},this.props.text)}}}},k={__proto__:null,default:()=>{const e=b(),{React:t}=goosemod.webpackModules.common,s=goosemod.webpackModules.findByDisplayName("FormItem"),o=goosemod.webpackModules.findByDisplayName("FormText"),n=goosemod.webpackModules.findByDisplayName("Flex"),a=goosemod.webpackModules.findByProps("marginTop20","marginBottom20"),r=goosemod.webpackModules.findByProps("title","dividerDefault"),i=goosemod.webpackModules.findByProps("formText","placeholder");return class extends t.PureComponent{render(){return t.createElement(s,{className:[n.Direction.VERTICAL,n.Justify.START,n.Align.STRETCH,n.Wrap.NO_WRAP,a.marginBottom20].join(" ")},t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t.createElement("div",{},t.createElement("div",{className:r.labelRow,style:{marginBottom:"4px"}},t.createElement("label",{class:r.title},this.props.text)),t.createElement(o,{className:i.description},this.props.subtext))),t.createElement(e))}}}},M={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common,t=b();goosemod.webpackModules.findByProps("Sizes","Colors","Looks","DropdownSizes");const s=goosemod.webpackModules.find((e=>"Markdown"===e.displayName&&e.rules)),o=goosemod.webpackModules.findByDisplayName("FormItem"),n=goosemod.webpackModules.findByDisplayName("FormText"),a=goosemod.webpackModules.findByDisplayName("Flex"),r=goosemod.webpackModules.findByProps("marginTop20","marginBottom20"),i=goosemod.webpackModules.findByProps("title","dividerDefault"),l=goosemod.webpackModules.findByProps("formText","placeholder");return class extends e.PureComponent{render(){return e.createElement(o,{className:[a.Direction.VERTICAL,a.Justify.START,a.Align.STRETCH,a.Wrap.NO_WRAP,r.marginBottom20].join(" ")},e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("div",{},e.createElement("div",{className:i.labelRow,style:{marginBottom:"4px"}},e.createElement("label",{class:i.title},this.props.text)),e.createElement(n,{className:l.description},e.createElement(s,{className:"gm-settings-note-markdown"},this.props.subtext||""))),this.props.children),e.createElement(t))}}}},E={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common,t=b(),s=goosemod.webpackModules.findByProps("Sizes","Colors","Looks","DropdownSizes"),o=goosemod.webpackModules.find((e=>"Markdown"===e.displayName&&e.rules)),n=goosemod.webpackModules.findByDisplayName("FormItem"),a=goosemod.webpackModules.findByDisplayName("FormText"),r=goosemod.webpackModules.findByDisplayName("Flex"),i=goosemod.webpackModules.findByProps("marginTop20","marginBottom20"),l=goosemod.webpackModules.findByProps("title","dividerDefault"),d=goosemod.webpackModules.findByProps("formText","placeholder");return class extends e.PureComponent{render(){return e.createElement(n,{className:[r.Direction.VERTICAL,r.Justify.START,r.Align.STRETCH,r.Wrap.NO_WRAP,i.marginBottom20].join(" ")},e.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},e.createElement("div",{},e.createElement("div",{className:l.labelRow,style:{marginBottom:"4px"}},e.createElement("label",{class:l.title},this.props.text)),e.createElement(a,{className:d.description},e.createElement(o,{className:"gm-settings-note-markdown"},this.props.subtext||""))),e.createElement(s,{color:this.props.danger?s.Colors.RED:s.Colors.BRAND,disabled:this.props.disabled,onClick:()=>this.props.onclick()},this.props.buttonText)),e.createElement(t))}}}},S={__proto__:null,default:()=>{const{React:e,constants:{DEFAULT_ROLE_COLOR:t,ROLE_COLORS:s}}=goosemod.webpackModules.common,o=b(),n=goosemod.webpackModules.findByDisplayName("FormItem"),a=goosemod.webpackModules.findByDisplayName("FormTitle"),r=goosemod.webpackModules.findByProps("marginTop20","marginBottom20"),i=goosemod.webpackModules.findByProps("defaultMarginh5");return class extends e.PureComponent{constructor(e){e.default=(e=>{if(e&&7===e.length)return parseInt(e.slice(1),16)})((e.initialValue||(()=>{}))())||0,e.value=e.default,super(e)}render(){const l=goosemod.webpackModules.find((e=>"ColorPicker"===e.default?.displayName));return e.createElement(n,{className:[r.marginBottom20].join(" ")},e.createElement(a,{tag:"h5",className:(0!==this.props.i?r.marginTop20+" ":"")+i.defaultMarginh5},this.props.text),e.createElement(l.default,{colors:s,defaultColor:this.props.default||t,disabled:!1,value:this.props.value,customColor:null,renderDefaultButton:t=>e.createElement(l.DefaultColorButton,t),renderCustomButton:t=>e.createElement(l.CustomColorButton,t),customPickerPosition:"bottom",onChange:e=>{var t;this.props.value=e,this.forceUpdate(),this.props.oninput("#"+((16711680&(t=e))>>>16).toString(16).padStart(2,"0")+((65280&t)>>>8).toString(16).padStart(2,"0")+(255&t).toString(16).padStart(2,"0"))}}),e.createElement(o))}}}},v={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common;return goosemod.webpackModules.findByProps("Sizes","Colors","Looks","DropdownSizes"),class t extends e.PureComponent{render(){return e.createElement(t,{color:t.Colors.BRAND,size:t.Sizes.SMALL,disabled:this.props.disabled,onClick:()=>this.props.onclick()},this.props.text)}}}},B={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common,t=goosemod.webpackModules.find((e=>"SearchBar"===e.displayName&&e.prototype.focus));return class extends e.PureComponent{render(){return this.props.text||(this.props.text=""),setTimeout((()=>{this.props.onchange(this.props.text)}),10),e.createElement(t,{...t.defaultProps,className:this.props.storeSpecific?"gm-store-search":"",size:t.Sizes.MEDIUM,query:this.props.text,placeholder:this.props.placeholder||"Search",onClear:()=>{this.props.text="",this.forceUpdate()},onChange:e=>{this.props.text=e,this.forceUpdate()}})}}}},_={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common,{SingleSelect:t}=goosemod.webpackModules.findByProps("SingleSelect"),s=goosemod.webpackModules.findByDisplayName("FormText"),o=goosemod.webpackModules.findByProps("formText","placeholder");return class extends e.PureComponent{render(){return"function"==typeof this.props.options&&(this.props.options=this.props.options()),this.props.value||(this.props.value=(this.props.selected||(()=>{}))()||this.props.options[0]),setTimeout((()=>{this.props.onchange(this.props.value)}),10),e.createElement("div",{className:"gm-inline-dropdown"},e.createElement(s,{className:o.description},this.props.label),e.createElement(t,{searchable:!1,onChange:e=>{this.props.value=e.value,this.forceUpdate()},value:this.props.value,options:this.props.options.map((e=>({label:e,value:e})))}))}}}},N=()=>{const{React:e}=goosemod.webpackModules.common,t=goosemod.webpackModules.findByDisplayName("Text");return class extends e.PureComponent{render(){return e.createElement("div",{className:"gm-store-header"},e.createElement(t,{color:t.Colors.HEADER_PRIMARY,size:t.Sizes.SIZE_20},this.props.text))}}},C={__proto__:null,default:N},T=()=>{const{React:e}=goosemod.webpackModules.common,t=goosemod.patcher.simpleTooltip(),s=new Intl.RelativeTimeFormat("en",{localeMatcher:"best fit",numeric:"auto",style:"long"}),o=goosemod.webpackModules.findByProps("Sizes","Colors","Looks","DropdownSizes"),n=goosemod.webpackModules.findByDisplayName("Switch"),a=goosemod.webpackModules.find((e=>"Markdown"===e.displayName&&e.rules)),r=goosemod.webpackModules.findByDisplayName("FormText"),i=goosemod.webpackModules.findByProps("formText","placeholder"),l=goosemod.webpackModules.findByProps("title","dividerDefault"),d=goosemod.webpackModules.findByProps("openModal","updateModal"),c=goosemod.webpackModules.findByDisplayName("SmallMediaCarousel"),p=goosemod.webpackModules.findByDisplayName("Discord"),m=goosemod.webpackModules.findByDisplayName("Clock"),g=goosemod.webpackModules.findByDisplayName("Info"),u=e=>{const t=Math.floor((Date.now()-e)/1e3),o=[{label:"year",seconds:31536e3},{label:"month",seconds:2592e3},{label:"day",seconds:86400},{label:"hour",seconds:3600},{label:"minute",seconds:60},{label:"second",seconds:1}].find((e=>e.seconds<t)),n=Math.floor(t/o.seconds);return s.format(-1*n,o.label)};return class extends e.PureComponent{constructor(e){super(e),this.state={}}render(){this.state.renderLoaded?this.state.renderLoaded=!1:(this.state.loaded=!this.props.i,this.state.loaded||setTimeout((()=>{this.setState({loaded:!0,renderLoaded:!0})}),10)),this.props.checked!==this.props.isToggled()&&(this.props.checked=this.props.isToggled());let s=!1;this.state.forceDisplay&&(s=!0,this.state.forceDisplay=!1,delete this.state.forceDisplay);let{notice:h}=this.props;switch(h){case 1:h="Other users may notice your usage";break;case 2:h="Other users may question or judge your usage, use appropriately"}return this.state.loaded?e.createElement("div",{className:["gm-store-card",this.props.mini?"gm-store-card-mini":"",...this.props.tags.map((e=>e.replace(/ /g,"|")))].join(" "),onClick:this.props.onClick,style:{display:this.props.i&&!s?"none":"block"}},e.createElement(c,{autoplayInterval:0,items:(this.props.images?.[0]?this.props.images:[goosemod.settings.gmSettings.placeholderimage?"/assets/2366391afb15ed6c2a019a0c0caa0797.svg":"data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA="]).map((e=>({type:1,src:e}))),paused:!0,onCurrentItemClick:()=>{this.props.images?.[0]&&d.openModal((()=>e.createElement("div",{className:"gm-carousel-modal"},e.createElement(c,{items:this.props.images.map((e=>({type:1,src:e}))),autoplayInterval:5e3}))))}}),e.createElement("div",{className:[l.title,this.props.author.every((e=>!e.avatar))?"no-pfp":""].join(" ")},...this.props.author.map(((t,s)=>[t.avatar?e.createElement("img",{loading:"lazy",src:`https://cdn.discordapp.com/avatars/${t.id}/${t.avatar}.png?size=32`,className:"gm-store-author-pfp"}):null,e.createElement("span",{className:"gm-store-author-name"},t.name),s!==this.props.author.length-1?e.createElement("span",{className:i.description},", "):null]))),e.createElement("div",{className:l.title},this.props.name),e.createElement(r,{className:this.props.name?i.description:""},e.createElement(a,{className:"gm-settings-note-markdown"},this.props.subtext)),e.createElement("div",{},this.props.github?e.createElement(t,{text:this.props.github.stars,position:"left"},(({onMouseEnter:t,onMouseLeave:s,className:o,text:n})=>e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor","aria-label":n,onMouseEnter:t,onMouseLeave:s,className:o},e.createElement("path",{d:"M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"})))):null,this.props.lastUpdated||this.props.subtext2?e.createElement(t,{text:(this.props.subtext2||"")+(this.props.subtext2&&this.props.lastUpdated?" | ":"")+(this.props.lastUpdated?u(1e3*this.props.lastUpdated):""),position:"left"},(({onMouseEnter:t,onMouseLeave:s,className:o,text:n})=>e.createElement(m,{width:24,height:24,"aria-label":n,className:o,onMouseEnter:t,onMouseLeave:s}))):null,this.props.notice?e.createElement(t,{text:h,position:"left"},(({onMouseEnter:t,onMouseLeave:s,className:o,text:n})=>e.createElement(g,{width:24,height:24,"aria-label":n,className:o,onMouseEnter:t,onMouseLeave:s}))):null),e.createElement("div",{},e.createElement(o,{color:"danger"===this.props.buttonType?o.Colors.RED:o.Colors.BRAND,look:"danger"===this.props.buttonType?o.Looks.OUTLINED:o.Looks.FILLED,size:o.Sizes.SMALL,onClick:()=>{this.props.onclick()}},this.props.buttonText),this.props.github?e.createElement(o,{color:o.Colors.GREY,size:o.Sizes.SMALL,onClick:()=>{window.open(`https://github.com/${this.props.github.repo}`)}},e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},e.createElement("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"}))):null,this.props.discordMessage?e.createElement(o,{color:o.Colors.GREY,size:o.Sizes.SMALL,onClick:()=>{const{transitionTo:e}=goosemod.webpackModules.findByProps("transitionTo"),{jumpToMessage:t}=goosemod.webpackModules.findByProps("jumpToMessage");e(`/channels/${this.props.discordMessage.guild}/${this.props.discordMessage.channel}`),t({channelId:this.props.discordMessage.channel,messageId:this.props.discordMessage.message,flash:!0})}},e.createElement(p,{width:"24",height:"24"})):null,e.createElement(n,{className:this.props.showToggle?"":"hide-toggle",checked:this.props.checked,disabled:!1,onChange:e=>{this.props.checked=!this.props.checked,this.state.renderLoaded=!0,this.state.forceDisplay=!0,this.forceUpdate(),this.props.onToggle(this.props.checked)}}))):e.createElement("div",{className:"gm-store-card-loading-placeholder"})}}},P={__proto__:null,default:T},D={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common,t=N(),s=T(),o=goosemod.webpackModules.findByProps("scrollerBase","auto","thin");return class extends e.PureComponent{render(){return this.props.cards||(this.props.cards=goosemod.settings.items.find((e=>e[1]===this.props.itemName))[2].filter((e=>"card"===e.type)).sort(this.props.sort).slice(0,10).map((t=>e.createElement(s,t)))),e.createElement("div",{className:"gm-store-category"},e.createElement(t,{text:this.props.text}),e.createElement("div",{className:o.auto},...this.props.cards))}}}},I={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common;return class extends e.PureComponent{render(){return e.createElement("div",{ref:e=>{e&&e.appendChild("function"==typeof this.props.element?this.props.element():this.props.element)}})}}}},R={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common,t=b(),s=goosemod.webpackModules.findByDisplayName("FormItem"),o=goosemod.webpackModules.findByDisplayName("FormText"),n=goosemod.webpackModules.findByDisplayName("TextInput"),a=goosemod.webpackModules.findByDisplayName("Flex"),r=goosemod.webpackModules.findByProps("marginTop20","marginBottom20"),i=goosemod.webpackModules.findByProps("formText","description");return class extends e.PureComponent{render(){return e.createElement(s,{title:this.props.text,className:[a.Direction.VERTICAL,a.Justify.START,a.Align.STRETCH,a.Wrap.NO_WRAP,r.marginBottom20].join(" ")},e.createElement(n,{onChange:e=>{this.props.oninput(e)},defaultValue:this.props.initialValue?this.props.initialValue():""}),this.props.subtext&&e.createElement(o,{className:[i.description,r.marginTop8].join(" ")},this.props.subtext),e.createElement(t))}}}},A={__proto__:null,default:()=>{const{React:e}=goosemod.webpackModules.common,t=goosemod.webpackModules.findByDisplayName("FormText"),s=goosemod.webpackModules.find((e=>"Markdown"===e.displayName&&e.rules)),o=goosemod.webpackModules.findByProps("marginTop20","marginBottom20");return class extends e.PureComponent{render(){return e.createElement(t,{type:"description",className:o.marginBottom20},e.createElement(s,{className:"gm-settings-note-markdown"},this.props.text||""))}}}};return e._createItem=(t,s,o=!0)=>{const{React:n}=g.webpackModules.common,a=g.webpackModules.findByDisplayName("FormSection"),r=g.webpackModules.findByDisplayName("FormTitle"),i=()=>s.slice(1).map(((s,o)=>{s.type.includes("danger-button")&&(s.type=s.type.replace("danger-",""),s.danger=!0);const a=e.Items[s.type];return a?n.createElement(a,{i:o,...s,itemName:t}):n.createElement("div")}));return o?n.createElement(a,{className:"#terms.store.plugins#"===t||"#terms.store.themes#"===t?"gm-store-settings":""},s[1].prototype?.render?null:n.createElement(r,{tag:"h1"},t),s[1].prototype?.render?n.createElement(s[1]):i()):n.createElement("div",{},i())},e.closeSettings=()=>{let e=document.querySelector(".standardSidebarView-E9Pc3j .closeButton-PCZcma");if(null===e)return!1;e.click()},e.createHeading=e=>{g.settings.items.push(["heading",e])},e.createItem=(e,t,s,o=!1)=>{g.settings.items.push(["item",e,t,s,o])},e.createSeparator=()=>{g.settings.items.push(["separator"])},e.gmSettings=m,e.isSettingsOpen=()=>null!==document.querySelector(".standardSidebarView-E9Pc3j .closeButton-PCZcma"),e.items=[],e.makeGooseModSettings=()=>{g.settingsUninjects=[],((e,s,o)=>{let n=e.settings.items;e.settings.items=[],e.settings.createHeading("GooseMod");const a=async(t,o)=>{switch(t){case"changelog":if(o){const t=[["item","#terms.changelog#",[""],async()=>{c()},!1]];s.separators&&t.unshift(["separator"]),e.settings.items.splice(e.settings.items.indexOf(e.settings.items.find((e=>"Themes"===e[1])))+1,0,...t)}else e.settings.items.splice(e.settings.items.indexOf(e.settings.items.find((e=>"Change Log"===e[1]))),s.separators?2:1);await e.settings.reopenSettings(),e.settings.openSettingItem("Settings");break;case"devchannel":o?goosemod.storage.set("goosemodUntetheredBranch","dev"):goosemod.storage.remove("goosemodUntetheredBranch");break;case"separators":if(o)s.home||goosemod.settings.items.splice(2,0,["separator"]),s.changelog&&goosemod.settings.items.splice(4,0,["separator"]);else{let t=!0;e.settings.items=e.settings.items.filter(((s,o)=>(e.settings.items[o+1]&&e.settings.items[o+1][1]&&"#terms.goosemod.modules#"===e.settings.items[o+1][1]&&(t=!1),!("separator"===s[0]&&t))))}await e.settings.reopenSettings(),e.settings.openSettingItem("Settings");break;case"gmBadges":e.gmBadges[o?"addBadges":"removeBadges"]()}s[t]=o},r=async()=>{await e.confirmDialog("Refresh","Refresh Required","This setting **requires a refresh to take effect**. You **may experience some strange behaviour** in this session before refreshing.")&&location.reload()};e.settings.createItem("#terms.settings#",["",{type:"header",text:"#terms.settings#"},{type:"toggle",text:"#settings.items.goosemod_change_log.title#",subtext:"#settings.items.goosemod_change_log.note#",onToggle:e=>a("changelog",e),isToggled:()=>s.changelog},{type:"toggle",text:"#settings.items.main_separators.title#",subtext:"#settings.items.main_separators.note#",onToggle:e=>a("separators",e),isToggled:()=>s.separators},{type:"toggle",text:"#settings.items.store_in_home.title#",subtext:"#settings.items.store_in_home.note#",onToggle:e=>{a("home",e),r()},isToggled:()=>s.home},{type:"header",text:"#terms.store.store#"},{type:"toggle",text:"#settings.items.auto_update.title#",subtext:"#settings.items.auto_update.note#",onToggle:e=>a("autoupdate",e),isToggled:()=>s.autoupdate},{type:"toggle",text:"New Module Notifications",subtext:"Shows a toast each time a new module is added to the Store",onToggle:e=>a("newModuleNotifications",e),isToggled:()=>s.newModuleNotifications},{type:"header",text:"#settings.items.headers.appearance#"},{type:"toggle",text:"#settings.items.goosemod_badges.title#",subtext:"#settings.items.goosemod_badges.note#",onToggle:e=>a("gmBadges",e),isToggled:()=>s.gmBadges},{type:"header",text:"#settings.items.headers.utilities#"},{type:"text-and-button",text:"#settings.items.purge_caches.title#",subtext:"#settings.items.purge_caches.note#",buttonText:"#settings.items.purge_caches.button#",onclick:async()=>{goosemod.storage.keys().filter((e=>e.toLowerCase().startsWith("goosemod")&&e.includes("Cache"))).forEach((e=>goosemod.storage.remove(e))),r()}},{type:"text-and-button",text:"#settings.items.start_tour.title#",subtext:"#settings.items.start_tour.note#",buttonText:"#settings.items.start_tour.button#",onclick:async()=>{document.querySelector(".closeButton-1tv5uR").click(),e.ootb.start()}},{type:"text-and-button",text:"#settings.items.copy_debug_info.title#",subtext:"#settings.items.copy_debug_info.note#",buttonText:"#settings.items.copy_debug_info.button#",onclick:async()=>{const{copy:t}=e.webpackModules.findByProps("copy","SUPPORTS_COPY");t(e.genDebugInfo())}},{type:"text-and-danger-button",text:"#settings.items.reset_goosemod.title#",subtext:"#settings.items.reset_goosemod.note#",buttonText:"#settings.items.reset_goosemod.button#",onclick:async()=>{await e.confirmDialog("Reset","Reset GooseMod","Confirming will completely reset GooseMod, removing all preferences and modules; as if you had installed GooseMod for the first time. This is irreversible.")&&(await e.remove(),window.location.reload())}},{type:"header",text:"#settings.items.headers.backup#"},{type:"text-and-button",text:"#settings.items.create_backup.title#",subtext:"#settings.items.create_backup.note#",buttonText:"#settings.items.create_backup.button#",onclick:()=>{const e=goosemod.storage.keys().filter((e=>e.toLowerCase().startsWith("goosemod")&&!e.includes("Cache"))).reduce(((e,t)=>(e[t]=goosemod.storage.get(t),e)),{}),t=JSON.stringify(e),s=document.createElement("a");s.style.display="none";const o=new Blob([t],{type:"application/json"});s.href=URL.createObjectURL(o),s.download="goosemodBackup.json",document.body.appendChild(s),s.click(),s.remove()}},{type:"text-and-button",text:"#settings.items.restore_backup.title#",subtext:"#settings.items.restore_backup.note#",buttonText:"#settings.items.restore_backup.button#",onclick:async()=>{const e=document.createElement("input");e.style.display="none",e.type="file",e.click(),await new Promise((t=>{e.onchange=()=>{t()}}));const t=e.files[0];if(!t)return;const s=new FileReader;s.onload=()=>{const e=JSON.parse(s.result);for(const t in e)t.startsWith("goosemod")&&goosemod.storage.set(t,e[t]);location.reload()},s.readAsText(t)}},{type:"header",text:"#settings.items.headers.tweaks#",collapsed:!0,collapseOffset:1},{type:"subtext",text:"#settings.items.subtexts.tweaks_description#"},{type:"toggle",text:"#settings.items.placeholder_image.title#",subtext:"#settings.items.placeholder_image.note#",onToggle:e=>{a("placeholderimage",e)},isToggled:()=>s.placeholderimage},{type:"toggle",text:"#settings.items.collapsible_home_category.title#",subtext:"#settings.items.collapsible_home_category.note#",onToggle:e=>{a("collapsiblehome",e)},isToggled:()=>s.collapsiblehome},{type:"header",text:"#settings.items.headers.experimental#",collapsed:!0,collapseOffset:1},{type:"subtext",text:"#settings.items.subtexts.experimental_warning#"},{type:"toggle",experimental:!0,text:"#settings.items.development_channel.title#",subtext:"#settings.items.development_channel.note#",onToggle:e=>{a("devchannel",e),r()},isToggled:()=>"dev"===goosemod.storage.get("goosemodUntetheredBranch")},{type:"toggle",experimental:!0,text:"#settings.items.data_attributes.title#",subtext:"#settings.items.data_attributes.note#",onToggle:e=>{a("attrs",e),r()},isToggled:()=>s.attrs},{type:"toggle",experimental:!0,text:"#settings.items.snippets.title#",subtext:"#settings.items.snippets.note#",onToggle:e=>{a("snippets",e),r()},isToggled:()=>s.snippets},{type:"toggle",experimental:!0,text:"#settings.items.force_theme_settings.title#",subtext:"#settings.items.force_theme_settings.note#",onToggle:e=>{a("allThemeSettings",e),r()},isToggled:()=>s.allThemeSettings},{type:"toggle",experimental:!0,text:"Topaz",subtext:"Load Topaz with GooseMod. Topaz is in alpha and very experimental.",onToggle:e=>{e?goosemod.storage.set("goosemodTopaz",!0):goosemod.storage.remove("goosemodTopaz"),r()},isToggled:()=>goosemod.storage.get("goosemodTopaz")},{type:"gm-footer"}]),s.separators&&!s.home&&e.settings.createSeparator();let i="#store.options.sort.stars#",l="#store.options.author.all#",d="",p=!1;const m=async()=>{if(p)return;p=!0;const s=t=>{const s=t.querySelectorAll(".title-31JmR4, .title-2dsDLn"),o=s[1],r=[...s[0].getElementsByClassName("gm-store-author-name")].map((e=>e.textContent.split("#")[0])),d=o.childNodes[0].wholeText,c=t.querySelector(".description-3_Ncsb, .description-30xx7u").innerText,p=n.test(d)||n.test(c),m=t.querySelector(".container-3auIfb, .container-2nx-BQ").classList.contains("hide-toggle")?"#store.options.tabs.store#":"#store.options.tabs.imported#";switch(i){case"#store.options.sort.az#":t.style.order="";break;case"#store.options.sort.last_updated#":{const s=e.moduleStoreAPI.modules.find((e=>e.name===d.trim()));t.style.order=3e9-s.lastUpdated;break}case"#store.options.sort.stars#":t.style.order=1e4-parseInt(t.children[4].children[0].ariaLabel)}t.style.display=!p||"#store.options.tabs.store#"!==a&&a!==m||"#store.options.author.all#"!==l&&!r.includes(l.split(" (").slice(0,-1).join(" ("))?"none":"block"},o=[...document.querySelectorAll(":not(.gm-store-category) > div > .gm-store-card")],n=new RegExp(`.*${d}.*`,"i");let a=document.querySelector(".selected-3s45Ha, .selected-g-kMVV")?.textContent||"#store.options.tabs.store#";"#store.options.tabs.store#"!==a&&"#store.options.tabs.imported#"!==a&&(a="#store.options.tabs.store#"),o.forEach(s);const r=""===d&&"#store.options.tabs.store#"===a&&"#store.options.author.all#"===l;[...document.getElementsByClassName("gm-store-category")].forEach((e=>e.style.display=r?"block":"none"));const c=document.querySelector(":not(.gm-store-category) > .gm-store-header");if(c&&(c.style.height=r?"":"0px",c.style.opacity=r?"":"0",c.style.margin=r?"":"0"),document.querySelector(".gm-store-card-loading-placeholder")){let e=[...document.querySelectorAll(".gm-store-card-loading-placeholder")];for(;0!==e.length;)e=e.filter((e=>"gm-store-card-loading-placeholder"===e.className||(s(e),!1))),await t(10)}c&&!r&&"#store.search_results_hint.none#"!==c.textContent&&o.every((e=>"none"===e.style.display))?(c.style.height="",c.style.opacity="",c.style.margin="",c.dataset.original=c.textContent,c.children[0].textContent="#store.search_results_hint.none#",""!==d&&"#store.options.tabs.store#"===a&&"#store.options.author.all#"===l&&(o[0]&&o[0].classList.contains("theme")?0!==goosemod.moduleStoreAPI.modules.filter((e=>!e.tags.includes("theme")&&(n.test(e.name)||n.test(e.description)))).length&&(c.children[0].textContent="#store.search_results_hint.other_category.plugins#",c.style.cursor="pointer",c.onclick=async()=>{const e=d;document.getElementById("gm-home-plugins").click(),await t(100);const s=document.querySelector(".input-3Xdcic, .input-2m5SfJ");s.value=e,s.__reactProps$.onChange({currentTarget:{value:e}})}):0!==goosemod.moduleStoreAPI.modules.filter((e=>e.tags.includes("theme")&&(n.test(e.name)||n.test(e.description)))).length&&(c.children[0].textContent="#store.search_results_hint.other_category.themes#",c.style.cursor="pointer",c.onclick=async()=>{const e=d;document.getElementById("gm-home-themes").click(),await t(100);const s=document.querySelector(".input-3Xdcic, .input-2m5SfJ");s.value=e,s.__reactProps$.onChange({currentTarget:{value:e}})}))):c&&"#store.categories.all.themes#"!==c.textContent&&"#store.categories.all.plugins#"!==c.textContent&&(c.children[0].textContent=c.dataset.original,c.style.cursor="",c.onclick=()=>{}),p=!1};e.settings.updateModuleStoreUI=m,["#terms.store.plugins#","#terms.store.themes#"].forEach(((t,s)=>e.settings.createItem(t,["",{type:"search",placeholder:0===s?"#store.options.search.placeholder.plugins#":"#store.options.search.placeholder.themes#",onchange:e=>{d=e,m()},storeSpecific:!0},{type:"dropdown-individual",label:"#store.options.sort.label#",options:["#store.options.sort.stars#","#store.options.sort.az#","#store.options.sort.last_updated#"],onchange:e=>{i=e,m()}},{type:"dropdown-individual",label:"#store.options.author.label#",options:()=>{const t=e.moduleStoreAPI.idCache.getCache(),s=[...e.moduleStoreAPI.modules.reduce(((e,s)=>{let o=s.authors;Array.isArray(o)||(o=[o]);for(const s of o){let o=s;if("object"==typeof s)o=s.n;else if(s.match(/^[0-9]{17,18}$/))o=t[s]?.data?.username;else{const e=s.match(/(.*) \(([0-9]{17,18})\)/);null!==e&&(o=e[1])}o&&e.set(o,(e.get(o)||0)+1)}return e}),new Map).entries()].sort(((e,t)=>t[1]-e[1])).map((e=>`${e[0]} (${e[1]})`));return s.unshift("#store.options.author.all#"),s},onchange:e=>{l=e,m()}},{type:"store-category",text:"#store.categories.top_starred#",sort:(e,t)=>t.github?.stars-e.github?.stars},{type:"store-category",text:"#store.categories.recently_updated#",sort:(e,t)=>t.lastUpdated-e.lastUpdated},{type:"store-header",text:0===s?"#store.categories.all.plugins#":"#store.categories.all.themes#"},{type:"gm-footer"}]))),e.settings.createItem("#terms.store.snippets#",["",{type:"search",placeholder:"Search Snippets",onchange:e=>{const t=document.getElementsByClassName("gm-store-card"),s=new RegExp(`.*${e}.*`,"i"),o=e=>{for(const t of e){const e=t.getElementsByClassName("markdown-11q6EU")[0].textContent,o=s.test(e);t.style.display=o?"":"none"}};0===t.length?setTimeout((()=>o(document.getElementsByClassName("gm-store-card"))),10):o(t)},storeSpecific:!0}]),s.changelog&&(s.separators&&e.settings.createSeparator(),e.settings.createItem("#terms.changelog#",[""],(async()=>{c()}))),e.settings.createSeparator(),e.settings.createHeading("#terms.goosemod.modules#"),e.settings.items=e.settings.items.concat(n)})(g,m),(async(e,s)=>{let o;for(;!(o=e.webpackModules.findByDisplayName("SettingsView"));)await t(50);const n=e.webpackModules.findByDisplayName("Text"),{React:a}=e.webpackModules.common;e.settingsUninjects.push(e.patcher.patch(o.prototype,"getPredicateSections",((t,o)=>{const r=o.find((e=>"logout"===e.section));return r?(o.splice(o.indexOf(r),0,...e.settings.items.filter((e=>!(s.home&&("#terms.store.plugins#"===e[1]||"#terms.store.themes#"===e[1]||"#terms.store.snippets#"===e[1])||!s.snippets&&"#terms.store.snippets#"===e[1]))).map((t=>{switch(t[0]){case"item":let s=t[1];switch(s){case"#terms.settings#":s="settings";break;case"#terms.store.plugins#":s="plugins";break;case"#terms.store.themes#":s="themes";break;case"#terms.store.snippets#":s="snippets";break;case"#terms.changelog#":s="changelog"}let o={section:"gm-"+s,label:t[1],predicate:()=>{},element:function(){if("function"==typeof t[3])return document.querySelector(".item-3XjbnG.selected-g-kMVV:not(.item-3mHhwr)").click(),t[3](),a.createElement("div");const s=document.querySelector(".standardSidebarView-E9Pc3j nav > div");return"#terms.store.plugins#"!==t[1]&&"#terms.store.themes#"!==t[1]&&"#terms.store.snippets#"!==t[1]||(setTimeout((()=>{document.querySelector(".sidebarRegion-VFTUkN").style.maxWidth="218px",document.querySelector(".contentColumnDefault-1VQkGM").style.maxWidth="calc(100vw - 218px - 60px - 20px)"}),10),s.addEventListener("click",(e=>{0!==e.clientX&&"#terms.store.plugins#"!==e.target.textContent&&"#terms.store.themes#"!==e.target.textContent&&"#terms.store.snippets#"!==e.target.textContent&&(document.querySelector(".sidebarRegion-VFTUkN").style.maxWidth="50%",document.querySelector(".contentColumnDefault-1VQkGM").style.maxWidth="740px")}))),e.settings._createItem(t[1],t[2])}};return t[4]&&(o.color="#f04747"),o;case"heading":return{section:"HEADER",label:t[1]};case"separator":return{section:"DIVIDER"}}})),{section:"DIVIDER"}),o.push({section:"DIVIDER"},{section:"CUSTOM",element:()=>a.createElement("div",{className:"info-3pQQBb"},a.createElement(n,{className:"line-18uChy",size:n.Sizes.SIZE_12,color:n.Colors.MUTED,tag:"span"},"GooseMod"," ",e.versioning.version," ",a.createElement("span",{className:"versionHash-mssSIL"},"(",e.versioning.hash.substring(0,7),")")),a.createElement(n,{className:"line-18uChy",size:n.Sizes.SIZE_12,color:n.Colors.MUTED,tag:"span"},"GooseMod Ext"," ",window.gmExtension))}),o):o}))),e.settings.isSettingsOpen()&&e.settings.reopenSettings()})(g,m),((e,s)=>{const o=s=>({label:s,action:async()=>{e.settings.openSettings(),await t(10);let o=s;switch(o){case"#terms.settings#":o="settings";break;case"#terms.store.plugins#":o="plugins";break;case"#terms.store.themes#":o="themes";break;case"#terms.store.snippets#":o="snippets";break;case"#terms.changelog#":o="changelog"}document.querySelector(`[aria-controls="gm-${o.replace(/ /g,"-").toLowerCase()}-tab"]`).click()}});e.settingsUninjects.push(e.patcher.contextMenu.patch("user-settings-cog",{label:"GooseMod",sub:[o("#terms.settings#"),s?void 0:o("#terms.store.plugins#"),s?void 0:o("#terms.store.themes#"),o("#terms.changelog#")].filter((e=>e))})),e.settingsUninjects.push(e.patcher.contextMenu.patch("user-settings-cog",{label:"#terms.goosemod.modules#",sub:()=>e.settings.items.slice(e.settings.items.indexOf(e.settings.items.find((e=>"#terms.goosemod.modules#"===e[1])))+1).map((e=>o(e[1])))}))})(g,m.home),m.home&&r(g);try{u()}catch(e){g.logger.debug("settings.load","Failed to load color picker")}},e.openSettingItem=e=>{try{const t=[...document.querySelector(".standardSidebarView-E9Pc3j nav > div").children];return t[1].click(),setTimeout((()=>t.find((t=>t.textContent===e)).click()),5),!0}catch(e){return!1}},e.openSettings=()=>{document.querySelector('.flex-2S1XBF.flex-3BkGQD.horizontal-112GEH.horizontal-1Piu5-.flex-3BkGQD.directionRow-2Iu2A9.justifyStart-2Mwniq.alignStretch-Uwowzr.noWrap-hBpHBz > [type="button"]:last-child').click()},e.removeItem=e=>{const t=g.settings.items.indexOf(g.settings.items.find((t=>t[1]===e)));if(-1===t)return!1;g.settings.items.splice(t,1)},e.removeModuleUI=(e,t)=>{const s=void 0===g.modules[e];s&&(g.modules[e]=Object.assign({},g.disabledModules[e]),delete g.disabledModules[e]),g.moduleStoreAPI.moduleRemoved(g.modules[e]),s||g.modules[e].goosemodHandlers.onRemove(),delete g.modules[e],g.moduleSettingsStore.clearModuleSetting(e),t&&g.settings.openSettingItem(t)},e.reopenSettings=async()=>{g.settings.closeSettings(),await t(500),g.settings.openSettings(),await t(100)},e.setThisScope=async t=>{g=t,e.Items=await(async()=>({divider:(await Promise.resolve().then((function(){return f}))).default(),header:(await Promise.resolve().then((function(){return w}))).default(),toggle:(await Promise.resolve().then((function(){return x}))).default(),text:(await Promise.resolve().then((function(){return k}))).default(),"text-and-child":(await Promise.resolve().then((function(){return M}))).default(),"text-and-button":(await Promise.resolve().then((function(){return E}))).default(),"text-and-color":(await Promise.resolve().then((function(){return S}))).default(),button:(await Promise.resolve().then((function(){return v}))).default(),search:(await Promise.resolve().then((function(){return B}))).default(),"dropdown-individual":(await Promise.resolve().then((function(){return _}))).default(),"store-header":(await Promise.resolve().then((function(){return C}))).default(),card:(await Promise.resolve().then((function(){return P}))).default(),"store-category":(await Promise.resolve().then((function(){return D}))).default(),custom:(await Promise.resolve().then((function(){return I}))).default(),"text-input":(await Promise.resolve().then((function(){return R}))).default(),subtext:(await Promise.resolve().then((function(){return A}))).default()}))()},Object.defineProperty(e,"__esModule",{value:!0}),e}({});//# sourceURL=GooseModSettings
